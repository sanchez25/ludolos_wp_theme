
(function() {
    const wheel = document.querySelector('.wheel-spinner');
    const startButton = document.querySelector('.spin-trigger');
    const modal = document.querySelector('.vin-circle-block');
    const arrow = document.querySelector('.wheel-vin-block');
    let deg = 0;

    startButton.addEventListener('click', () => {
        startButton.style.pointerEvents = 'none';
        deg = Math.floor(5000 + Math.random() * 5000);
        wheel.style.transition = 'transform 5s ease-out';
        wheel.style.transform = `rotate(${deg}deg)`;
        arrow.style.animation = 'rotation 0.5s linear infinite';
        wheel.classList.add('blur');
        modal.classList.remove('open');
    });

    wheel.addEventListener('transitionend', () => {
        wheel.classList.remove('blur');
        modal.classList.add('open');
        startButton.style.pointerEvents = 'auto';
        wheel.style.transition = 'none';
        const actualDeg = deg % 360;
        arrow.style.animation = 'none';
        wheel.style.transform = `rotate(${actualDeg}deg)`;
    });

})();

